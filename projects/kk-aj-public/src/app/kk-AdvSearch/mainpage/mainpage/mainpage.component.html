<section class="pt-5 pb-2 bg-image-full aj-section-bg-color-darker">
  <!-- Features section-->
    <div class="container ">
        <div class="row gx-3">
          <div class="col-10">
            <h4>Avancerad sök</h4>
          </div>
          <div class="col-12 col-md-2 text-end">
            <a (click)="goBack()" class="gen-button gen-button-flat">
              <span class="text">Tillbaka</span>
            </a>

          </div>
        </div>
    </div>
</section>

<section class="py-1 bg-image-full aj-section-bg-color-darker" >
  <!-- Features section-->
    <div class="container my-5">
        <div class="row gx-3">
          <div class="d-none d-md-block col-lg-1 col-xl-3 mb-5 mb-lg-0 ">


          </div>
          <div class="col-12 col-lg-10 col-xl-6 mb-5 mb-lg-0 ">

            <div class="topblockContainer">
              <ng-container [formGroup]="FgAdvSearch">

              <div  class="aj-btn-group" >
                <select id="arridBlock" formControlName="arrTypID" class="form-select custom-select " aria-label="Default select example">
                  <option >Alla arrangemangstyper</option>
                  <option value="1">Besöksmål med resestöd</option>
                  <option value="2">Föreställning på turné</option>
                  <option value="3">Skolbio</option>
                  <option value="4">Utställning på turné</option>
                  <option value="5">Workshops/Projekt</option>
                </select>

                <div class="ng-autocomplete" >
                  <ng-autocomplete
                    [data]="autocompletedata"
                    [searchKeyword]="keyword"
                    [customFilter] = autofilter()
                    (selected)='selectEvent($event)'
                    (inputChanged)='onChangeSearch($event)'
                    (inputCleared)='onCleared()'
                    [itemTemplate]="itemTemplate"
                    [notFoundTemplate]="notFoundTemplate"
                    (inputFocused)='onFocused()'
                    [minQueryLength]="3"
                    [focusFirst]="true"
                    #ngaoutoControll>
                  </ng-autocomplete>

                  <ng-template #itemTemplate let-item>
                  <a [innerHTML]="item.ansokningtitle + ' (' + item.ansokningutovare + ')'"></a>
                  </ng-template>

                  <ng-template #notFoundTemplate let-notFound>
                  <div>Har inte hittat något</div>
                  </ng-template>
                </div>
                <button class="btn btn-success" (keydown.enter)="formCoreSearchClick()" (click)="formCoreSearchClick()"  id="dropdownBasic1">SÖK</button>
              </div>

              <div class="srhKonstformBlock pt-3">
                <div class="btn-group btn-group-toggle flex-wrap">
                  <label class="btn btn-outline-secondary chkkonstform active" [ngClass]="{'active': chkKF[0]? true : false}" ngbButtonLabel>
                    <input type="checkbox" (change)="onCheckboxChange($event,'konstartidList')" value="0" rel="0" ngbButton>Alla
                  </label>
                  <label class="btn btn-outline-secondary chkkonstform" [ngClass]="{'active': chkKF[12]? true : false}" ngbButtonLabel>
                    <input type="checkbox" (change)="onCheckboxChange($event,'konstartidList')" value="12" rel="12" ngbButton> Annan scenkonst
                  </label>
                  <label class="btn btn-outline-secondary chkkonstform" [ngClass]="{'active': chkKF[2]? true : false}"ngbButtonLabel>
                    <input type="checkbox" (change)="onCheckboxChange($event,'konstartidList')" value="2" rel="2" ngbButton>Dans
                  </label>
                  <label class="btn btn-outline-secondary chkkonstform" [ngClass]="{'active': chkKF[3]? true : false}" ngbButtonLabel>
                    <input type="checkbox" (change)="onCheckboxChange($event,'konstartidList')" value="3" rel="3" ngbButton>Film & media
                  </label>
                  <label class="btn btn-outline-secondary chkkonstform" [ngClass]="{'active': chkKF[4]? true : false}" ngbButtonLabel>
                    <input type="checkbox" (change)="onCheckboxChange($event,'konstartidList')" value="4" rel="4" ngbButton>Konst, form & design
                  </label>
                  <label class="btn btn-outline-secondary chkkonstform" [ngClass]="{'active': chkKF[5]? true : false}" ngbButtonLabel>
                    <input type="checkbox" (change)="onCheckboxChange($event,'konstartidList')" value="5" rel="5" ngbButton>Litteratur, berättande
                  </label>

                  <label class="btn btn-outline-secondary chkkonstform" [ngClass]="{'active': chkKF[6]? true : false}" ngbButtonLabel>
                    <input type="checkbox"  (change)="onCheckboxChange($event,'konstartidList')" value="6" rel="6" ngbButton>Musik
                  </label>
                  <label class="btn btn-outline-secondary chkkonstform" [ngClass]="{'active': chkKF[7]? true : false}" ngbButtonLabel>
                    <input type="checkbox" (change)="onCheckboxChange($event,'konstartidList')" value="7" rel="7" ngbButton>Natur- och kulturarv
                  </label>
                  <label class="btn btn-outline-secondary chkkonstform" [ngClass]="{'active': chkKF[8]? true : false}" ngbButtonLabel>
                    <input type="checkbox" (change)="onCheckboxChange($event,'konstartidList')" value="8" rel="8" ngbButton> Nycirkus/cirkus
                  </label>
                  <label class="btn btn-outline-secondary chkkonstform" [ngClass]="{'active': chkKF[11]? true : false}" ngbButtonLabel>
                    <input type="checkbox" (change)="onCheckboxChange($event,'konstartidList')" value="11" rel="11" ngbButton> Science Center
                  </label>
                  <label class="btn btn-outline-secondary chkkonstform" [ngClass]="{'active': chkKF[9]? true : false}" ngbButtonLabel>
                    <input type="checkbox"(change)="onCheckboxChange($event,'konstartidList')" value="9" rel="9" ngbButton> Slöjd
                  </label>
                  <label class="btn btn-outline-secondary chkkonstform" [ngClass]="{'active': chkKF[10]? true : false}" ngbButtonLabel>
                    <input type="checkbox" (change)="onCheckboxChange($event,'konstartidList')" value="10" rel="10" ngbButton> Teater
                  </label>
                </div>
                <div class="btn-group btn-group-toggle flex-wrap mt-3">
                  <label class="btn btn-outline-secondary chkkonstform active" [ngClass]="{'active': chkAge[0]? true : false}" ngbButtonLabel>
                    <input type="checkbox" (change)="onCheckboxChange($event,'ageList')" value="0"  ngbButton>Alla
                  </label>
                  <label class="btn btn-outline-secondary chkkonstform" [ngClass]="{'active': chkAge[1]? true : false}" ngbButtonLabel>
                    <input type="checkbox" (change)="onCheckboxChange($event,'ageList')" value="1" ngbButton> 0-6 år
                  </label>
                  <label class="btn btn-outline-secondary chkkonstform" [ngClass]="{'active': chkAge[2]? true : false}" ngbButtonLabel>
                    <input type="checkbox" (change)="onCheckboxChange($event,'ageList')" value="2" ngbButton> 7-9 år
                  </label>
                  <label class="btn btn-outline-secondary chkkonstform" [ngClass]="{'active': chkAge[3]? true : false}" ngbButtonLabel>
                    <input type="checkbox" (change)="onCheckboxChange($event,'ageList')" value="3" ngbButton>10-12 år
                  </label>
                  <label class="btn btn-outline-secondary chkkonstform" [ngClass]="{'active': chkAge[4]? true : false}" ngbButtonLabel>
                    <input type="checkbox" (change)="onCheckboxChange($event,'ageList')" value="4" ngbButton> 13-15 år
                  </label>
                  <label class="btn btn-outline-secondary chkkonstform" [ngClass]="{'active': chkAge[5]? true : false}" ngbButtonLabel>
                    <input type="checkbox" (change)="onCheckboxChange($event,'ageList')" value="5" ngbButton> 16-19 år
                  </label>
                </div>
              </div>
              </ng-container>
            </div>
          </div>
          <div class="d-none d-md-block col-lg-1 col-xl-3 mb-5 mb-lg-0 ">
          </div>
        </div>
    </div>

</section>


<!-- Section-1 Start -->
<section *ngIf="IsSearching" class=" aj-section-bg-color-dark" [ngClass]=" searchResultParam.length >0 ? 'gen-section-padding-2' : 'gen-section-padding-3'">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="btn-group mb-3" role="group" aria-label="Sökning" *ngIf="searchResultParam.length >0">Sökning:
          <div type="button" disabled class="btn btn-outline-Search btn-sm me-2" *ngFor="let itm of searchResultParam" title="{{itm}}">{{itm}}</div>
        </div>
      </div>
    </div>
      <div class="row">
          <div class="col-lg-12">
            <h4>Hittade arrangemang (<span *ngIf="ShowSpinner" class="spinner-border spinner-border-lg" role="status"> </span><span *ngIf="!ShowSpinner">{{filterMetadata?.count}}</span>)</h4>
          </div>
          <div class="col-lg-12">
            <app-kk-no-result *ngIf="showNoPostToShow"></app-kk-no-result>
              <!-- START paginering nummer block -->
              <div class="row kk_aj_productPagerblock" *ngIf="showNoPostToShow || filterMetadata.count >0 ">
                <div class="small-12 text-center ">
                  <pagination-controls
                  previousLabel="Föregående"
                  nextLabel="Nästa"
                  screenReaderPaginationLabel="Pagination"
                  screenReaderPageLabel="Sida"
                  screenReaderCurrentLabel="Du är på sida"
                  (pageChange)="pageChanged($event)">
                </pagination-controls>
                </div>
              </div>
              <!-- STOP paginering nummer block -->
              <div *ngIf="!showNoPostToShow" class="row ajmax-row-height">

                <!-- Item loop START-->
                  <div class="col-xl-3 col-lg-4 col-md-6" *ngFor="let item of mainPageData | customFilter:filterterm.konstform:filterterm.bokningsbar:filterterm.kostnad:filterterm.tid:filterterm.morklaggning:filterterm.takhojd:filterMetadata  | paginate: { itemsPerPage: showPageMax, currentPage: p}">
                    <div class="gen-carousel-movies-style-2 movie-grid style-2">

                        <div class="gen-movie-contain">

                          <a id="goto{{item.ansokningid}}" (click)="goToDetail(item.ansokningid)" title="{{item.ansokningtitle}}" class="img-fluid">
                          <div class="gen-movie-img text-center">
                            <img src="https://kulturkatalogenvast.org/Portals/0/kulturkatalogenArrImages/{{item.ansokningMediaImage.mediaUrl}}" alt="ansokningtitle">
                            </div>
                          </a>

                            <div class="gen-movie-add">
                                <div class="wpulike wpulike-heart">
                                  <div class="wp_ulike_general_class wp_ulike_is_not_liked">
                                    <button type="button" (click)="addToFavorit(item)" id="minnesID_{{item.ansokningid}}" class="wp_ulike_btn wp_ulike_put_image" title="Lägg till i minneslistan"><i [ngClass]="setFavoClass(item.ansokningid) ? 'fa-check' : 'fa-plus'" class="fa  ajfavoritIconRing" aria-hidden="true"></i></button>
                                  </div>
                                </div>
                            </div>
                            <div class="gen-movie-action">
                            </div>

                          <div class="gen-info-contain">
                            <a (click)="goToDetail(item.ansokningid)"  >
                            <div class="gen-movie-info">
                              <h3>{{item.ansokningtitle}}</h3>
                                  <p>{{item.ansokningsubtitle}}</p>
                            </div>
                            <div class="gen-movie-meta-holder">
                              <p>Utövare: {{item.ansokningutovare}}<br>
                              Ålder: {{item.ansokningAgespan}} år
                              </p>
                            </div>
                          </a>
                          </div>
                        </div>

                    </div>
                  </div>
                <!-- Item loop STOPP-->

              </div>
          </div>
          <div class="col-lg-12 col-md-12 text-center">
             <!-- START paginering nummer block -->
          <div class="row kk_aj_productPagerblock" *ngIf="showNoPostToShow || filterMetadata.count >0 ">
            <div class="small-12 gen-pagination">

              <pagination-controls
              previousLabel="Föregående"
              nextLabel="Nästa"
              screenReaderPaginationLabel="Pagination"
              screenReaderPageLabel="Sida"
              screenReaderCurrentLabel="Du är på sida"
              (pageChange)="pageChanged($event)">
            </pagination-controls>
           </div>
        </div>
      </div>
    </div>
  </div>
</section>
